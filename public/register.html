<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your InstructoHub LMS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fdf4f0',
                            100: '#fce8e0',
                            200: '#f9d1c1',
                            300: '#f5b9a2',
                            400: '#f09c7d',
                            500: '#e16b3b', // Primary brand color
                            600: '#d15a2b',
                            700: '#b44a22',
                            800: '#933c1d',
                            900: '#78301a',
                            DEFAULT: '#e16b3b',
                        },
                        secondary: {
                            50: '#e7eaeb',
                            100: '#cfd5d7',
                            200: '#a0acb0',
                            300: '#728389',
                            400: '#435a62',
                            500: '#1b3942', // Secondary brand color
                            600: '#18333b',
                            700: '#152b32',
                            800: '#122229',
                            900: '#0e1a20',
                            DEFAULT: '#1b3942',
                        },
                        success: {
                            DEFAULT: '#4CAF50',
                            dark: '#3a8c3f',
                        },
                        danger: {
                            DEFAULT: '#EF4444',
                            dark: '#B91C1C',
                        },
                        neutral: {
                            50: '#fafafa',
                            100: '#f5f5f5',
                            200: '#e5e5e5',
                            300: '#d4d4d4',
                            400: '#a3a3a3',
                            500: '#737373',
                            600: '#525252',
                            700: '#404040',
                            800: '#262626',
                            900: '#171717',
                        },
                        background: {
                            page: '#f7f7f7',
                            card: '#ffffff',
                        },
                        border: {
                            DEFAULT: '#e5e7eb',
                            accent: '#e16b3b',
                        },
                        text: {
                            primary: '#1b3942',
                            secondary: '#4b5563',
                            muted: '#6b7280',
                            light: '#ffffff',
                        },
                    },
                    fontFamily: {
                        serif: ['PT Serif', 'serif']
                    },
                    animation: {
                        fadeIn: 'fadeIn 0.5s ease-out forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': {
                                opacity: '0',
                                transform: 'translateY(10px)'
                            },
                            '100%': {
                                opacity: '1',
                                transform: 'translateY(0)'
                            },
                        }
                    },
                },
            },
        }
    </script>
</head>

<body class="bg-white min-h-screen">
    <div class="w-full">
        <div class="h-12 md:block hidden"></div>
        <div class="h-16"></div>
    </div>
    <header class="w-full fixed top-0 z-50 transition-all duration-300" id="header">
        <div class="bg-secondary text-white py-3 hidden md:block">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center">
                    <div class="flex gap-8">
                        <a href="mailto:ankit@instructohub.com"
                            class="flex items-center gap-2 text-gray-300 hover:text-brand transition-colors">
                            <i data-lucide="mail" class="w-4 h-4"></i>
                            <span>ankit@instructohub.com</span>
                        </a>
                        <a href="tel:+919810206863"
                            class="flex items-center gap-2 text-gray-300 hover:text-brand transition-colors">
                            <i data-lucide="phone" class="w-4 h-4"></i>
                            <span>+919810206863</span>
                        </a>
                        <a href="#" class="flex items-center gap-2 text-gray-300 hover:text-brand transition-colors">
                            <i data-lucide="map-pin" class="w-4 h-4"></i>
                            <span>Noida, UP, India</span>
                        </a>
                    </div>
                    <div class="flex gap-6">
                        <a href="https://x.com/InstructoH75197" class="text-gray-300 hover:text-brand transition-colors"
                            aria-label="Twitter">
                            <i data-lucide="twitter" class="w-4 h-4"></i>
                        </a>
                        <a href="https://www.facebook.com/people/InstructoHub/61572722776722/"
                            class="text-gray-300 hover:text-brand transition-colors" aria-label="Facebook">
                            <i data-lucide="facebook" class="w-4 h-4"></i>
                        </a>
                        <a href="https://www.linkedin.com/company/instructohub"
                            class="text-gray-300 hover:text-brand transition-colors" aria-label="LinkedIn">
                            <i data-lucide="linkedin" class="w-4 h-4"></i>
                        </a>
                        <a href="https://www.youtube.com/@Instructo-Hub"
                            class="text-gray-300 hover:text-brand transition-colors" aria-label="Youtube">
                            <i data-lucide="youtube" class="w-4 h-4"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white border-b py-4" id="nav-bar">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-6">
                        <button class="md:hidden text-secondary-700 hover:text-brand transition-colors"
                            onclick="toggleMobileMenu()" aria-label="Toggle menu">
                            <i data-lucide="menu" class="w-6 h-6" id="menu-icon"></i>
                            <i data-lucide="x" class="w-6 h-6 hidden" id="close-icon"></i>
                        </button>
                        <a href="/" class="text-2xl font-bold">
                            <img src="https://static.instructohub.com/staticfiles/assets/images/website/Instructo_hub_logo.png"
                                alt="Logo" class="h-8">
                        </a>
                    </div>
                    <nav class="hidden md:flex items-center gap-8">
                        <a href="#home" onclick="smoothScroll(event, '#home')"
                            class="flex items-center gap-1 text-secondary-700 hover:text-brand transition-colors py-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0 after:bg-brand after:transition-all after:duration-300 hover:after:w-full">Home</a>
                        <a href="#about" onclick="smoothScroll(event, '#about')"
                            class="flex items-center gap-1 text-secondary-700 hover:text-brand transition-colors py-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0 after:bg-brand after:transition-all after:duration-300 hover:after:w-full">About
                            Us</a>
                        <a href="#mission" onclick="smoothScroll(event, '#mission')"
                            class="flex items-center gap-1 text-secondary-700 hover:text-brand transition-colors py-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0 after:bg-brand after:transition-all after:duration-300 hover:after:w-full">Mission</a>
                        <a href="#products" onclick="smoothScroll(event, '#products')"
                            class="flex items-center gap-1 text-secondary-700 hover:text-brand transition-colors py-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0 after:bg-brand after:transition-all after:duration-300 hover:after:w-full">Products</a>
                        <a href="#values" onclick="smoothScroll(event, '#values')"
                            class="flex items-center gap-1 text-secondary-700 hover:text-brand transition-colors py-2 relative after:content-[''] after:absolute after:left-0 after:bottom-0 after:h-0.5 after:w-0 after:bg-brand after:transition-all after:duration-300 hover:after:w-full">Features</a>
                    </nav>
                    <div class="flex items-center gap-6">
                        <button
                            class="hidden md:block px-6 py-2.5 bg-brand text-white rounded-md hover:bg-brand-600 transition-colors shadow-md hover:shadow-lg"
                            onclick="window.location.href = '/register'">
                            Get Your LMS Now
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="md:hidden bg-white border-t shadow-lg hidden" id="mobile-menu">
            <a href="#home" onclick="smoothScroll(event, '#home'); toggleMobileMenu();"
                class="block px-6 py-4 text-secondary-700 hover:bg-gray-50 hover:text-brand transition-colors">Home</a>
            <div class="border-t border-gray-100">
                <a href="#about" onclick="smoothScroll(event, '#about'); toggleMobileMenu();"
                    class="block px-6 py-4 text-secondary-700 hover:bg-gray-50 hover:text-brand transition-colors">About
                    Us</a>
            </div>
            <div class="border-t border-gray-100">
                <a href="#mission" onclick="smoothScroll(event, '#mission'); toggleMobileMenu();"
                    class="block px-6 py-4 text-secondary-700 hover:bg-gray-50 hover:text-brand transition-colors">Mission</a>
            </div>
            <div class="border-t border-gray-100">
                <a href="#products" onclick="smoothScroll(event, '#products'); toggleMobileMenu();"
                    class="block px-6 py-4 text-secondary-700 hover:bg-gray-50 hover:text-brand transition-colors">Products</a>
            </div>
            <div class="border-t border-gray-100">
                <a href="#values" onclick="smoothScroll(event, '#values'); toggleMobileMenu();"
                    class="block px-6 py-4 text-secondary-700 hover:bg-gray-50 hover:text-brand transition-colors">Features</a>
            </div>
            <div class="border-t border-gray-100 p-6">
                <button
                    class="w-full px-6 py-3 bg-brand text-white rounded-md hover:bg-brand-600 transition-colors shadow-md"
                    onclick="openModal()">
                    View in Action
                </button>
                <div class="mt-6 flex justify-center gap-8">
                    <a href="https://x.com/InstructoH75197" class="text-gray-500 hover:text-brand transition-colors"
                        aria-label="Twitter">
                        <i data-lucide="twitter" class="w-4 h-4"></i>
                    </a>
                    <a href="https://www.facebook.com/people/InstructoHub/61572722776722/"
                        class="text-gray-500 hover:text-brand transition-colors" aria-label="Facebook">
                        <i data-lucide="facebook" class="w-4 h-4"></i>
                    </a>
                    <a href="https://www.linkedin.com/company/instructohub"
                        class="text-gray-500 hover:text-brand transition-colors" aria-label="LinkedIn">
                        <i data-lucide="linkedin" class="w-4 h-4"></i>
                    </a>
                    <a href="https://www.youtube.com/@Instructo-Hub"
                        class="text-gray-500 hover:text-brand transition-colors" aria-label="Youtube">
                        <i data-lucide="youtube" class="w-4 h-4"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="text-secondary fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center hidden"
        id="video-modal">
        <div class="relative w-full max-w-5xl mx-4">
            <button onclick="closeModal()"
                class="absolute -top-12 right-0 text-white hover:text-brand transition-colors" aria-label="Close modal">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div class="relative w-full pt-[56.25%] bg-black rounded-lg overflow-hidden shadow-2xl">
                <iframe class="absolute top-0 left-0 w-full h-full rounded-lg"
                    src="https://www.youtube.com/embed/-W2h0I7xdso" title="YouTube video player"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
        </div>
    </div>
    <div class="text-secondary fixed inset-0 bg-gradient-to-br from-secondary-800 via-secondary-700 to-secondary-900 bg-opacity-95 flex flex-col items-center justify-center z-50 backdrop-blur-sm hidden"
        id="creation-loader">
        <div class="bg-background-card rounded-xl shadow-2xl p-6 w-full max-w-md text-center relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-400 via-brand-500 to-brand-600"
                id="progress-bar"></div>
            <div class="relative">
                <div class="w-16 h-16 mx-auto mb-4 relative">
                    <div
                        class="absolute inset-0 rounded-full bg-gradient-to-r from-brand-400 to-brand-600 animate-spin opacity-20">
                    </div>
                    <div
                        class="absolute inset-2 rounded-full bg-gradient-to-r from-brand-500 to-brand-600 animate-pulse flex items-center justify-center">
                        <i data-lucide="server" class="w-6 h-6 text-white"></i>
                    </div>
                </div>
                <h3
                    class="text-2xl font-bold bg-gradient-to-r from-brand-600 to-brand-500 bg-clip-text text-transparent mb-2">
                    Creating Your InstructoHub LMS
                </h3>
                <div class="flex items-center justify-center mb-4 p-3 bg-neutral-50 rounded-lg">
                    <div class="flex items-center justify-center w-8 h-8 bg-gradient-to-br from-brand-500 to-brand-600 rounded-full mr-2 animate-pulse"
                        id="step-icon">
                        <i data-lucide="zap" class="w-4 h-4 text-white"></i>
                    </div>
                    <p class="text-text-secondary text-sm" id="step-message">Getting your information processed</p>
                </div>
                <div class="w-full bg-neutral-200 rounded-full h-2 mb-3 overflow-hidden">
                    <div class="bg-gradient-to-r from-brand-400 via-brand-500 to-brand-600 h-2 rounded-full transition-all duration-300 ease-out relative"
                        id="progress-fill">
                        <div class="absolute inset-0 bg-white opacity-30 animate-pulse"></div>
                    </div>
                </div>
                <div class="flex justify-between text-xs text-text-muted mb-3">
                    <span id="progress-percent">0% Complete</span>
                    <span id="time-remaining">~70s remaining</span>
                </div>
                <div class="grid grid-cols-8 gap-1 mb-4" id="step-indicators">
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                    <div class="h-1 rounded-full bg-neutral-200"></div>
                </div>
                <p class="text-xs text-text-muted leading-relaxed">
                    Please keep this window open. We're setting up your complete
                    InstructoHub environment with database, plugins, and security
                    configurations. This process typically takes 60-80 seconds.
                </p>
            </div>
        </div>
    </div>
    <main class="text-secondary container mx-auto max-w-4xl pt-4">
        <div class="bg-neutral-100 backdrop-blur-sm p-6 rounded-xl shadow-xl border border-brand-100 relative">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-400 via-brand-500 to-brand-600">
            </div>
            <div class="text-center mb-8">
                <p class="text-text-secondary text-xl font-bold max-w-2xl mx-auto">
                    Create your personalized learning environment in minutes. Fill in
                    the details below to launch your professional-grade LMS instance.
                </p>
            </div>
            <div class="p-4 mb-6 rounded-xl flex items-start shadow-lg border-l-4 animate-fadeIn hidden"
                id="status-message">
                <div class="flex-shrink-0 mr-3">
                    <div class="flex items-center justify-center w-6 h-6 rounded-full" id="status-icon">
                        <i data-lucide="check-circle" class="w-4 h-4 text-white"></i>
                    </div>
                </div>
                <div class="flex-grow">
                    <p class="text-sm font-medium" id="status-text"></p>
                </div>
                <button onclick="hideStatus()" class="ml-4 text-lg font-bold hover:opacity-70 transition-opacity">
                    Ã—
                </button>
            </div>
            <form id="lms-form" class="space-y-8">
                <section>
                    <div class="flex items-start border-b border-brand-100 pb-3 mb-6">
                        <div
                            class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-brand-500 to-brand-600 rounded-lg mr-3 shadow-md">
                            <i data-lucide="globe" class="w-5 h-5 text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-semibold text-text-primary">LMS Configuration</h2>
                            <p class="text-text-secondary text-sm mt-1">Configure your LMS's basic settings and domain
                            </p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 gap-4">
                        <div class="group">
                            <label for="subdomain" class="block text-sm font-semibold text-text-primary mb-2">
                                LMS Subdomain <span class="text-danger">*</span>
                            </label>
                            <div class="flex items-center">
                                <input type="text" id="subdomain" name="subdomain" value="sitename"
                                    placeholder="e.g., my-learning-site" required
                                    class="w-full px-3 py-2 border border-neutral-300 rounded-l-lg shadow-sm focus:ring-2 focus:ring-brand-400 focus:border-brand-500 transition-all duration-200 hover:border-neutral-400">
                                <span
                                    class="inline-flex items-center bg-gradient-to-r from-neutral-100 to-brand-50 px-3 py-2 rounded-r-lg border border-l-0 border-neutral-300 text-text-secondary text-sm font-medium">
                                    .instructohub.com
                                </span>
                            </div>
                            <p class="mt-1 text-sm" id="subdomain-status"></p>
                        </div>
                    </div>
                </section>
                <section>
                    <div class="flex items-start border-b border-brand-100 pb-3 mb-6">
                        <div
                            class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-brand-500 to-brand-600 rounded-lg mr-3 shadow-md">
                            <i data-lucide="school" class="w-5 h-5 text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-semibold text-text-primary">Institution Details</h2>
                            <p class="text-text-secondary text-sm mt-1">Customize your learning management system
                                settings</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="md:col-span-2 group">
                            <label for="institution_name" class="block text-sm font-semibold text-text-primary mb-2">
                                Your Institution Name <span class="text-danger">*</span>
                            </label>
                            <input type="text" id="institution_name" name="institution_name"
                                value="My Learning Platform" placeholder="e.g., My Learning Academy" required
                                class="w-full px-3 py-2 border border-neutral-300 rounded-lg shadow-sm focus:ring-2 focus:ring-brand-400 focus:border-brand-500 transition-all duration-200 hover:border-neutral-400">
                        </div>
                        <div class="group">
                            <label for="admin_email" class="block text-sm font-semibold text-text-primary mb-2">
                                Admin Email <span class="text-danger">*</span>
                            </label>
                            <input type="email" id="admin_email" name="admin_email" value="admin@example.com"
                                placeholder="admin@yourorganization.com" required
                                class="w-full px-3 py-2 border border-neutral-300 rounded-lg shadow-sm focus:ring-2 focus:ring-brand-400 focus:border-brand-500 transition-all duration-200 hover:border-neutral-400">
                        </div>
                        <div class="group">
                            <label for="admin_user" class="block text-sm font-semibold text-text-primary mb-2">
                                Admin Username <span class="text-danger">*</span>
                            </label>
                            <input type="text" id="admin_user" name="admin_user" value="admin"
                                placeholder="Choose a strong username" required
                                class="w-full px-3 py-2 border border-neutral-300 rounded-lg shadow-sm focus:ring-2 focus:ring-brand-400 focus:border-brand-500 transition-all duration-200 hover:border-neutral-400">
                        </div>
                        <div class="md:col-span-2 group">
                            <label for="admin_password" class="block text-sm font-semibold text-text-primary mb-2">
                                Admin Password <span class="text-danger">*</span>
                            </label>
                            <input type="password" id="admin_password" name="admin_password" value="Ankit@1234"
                                placeholder="Enter a secure password (8+ characters)" required
                                class="w-full px-3 py-2 border border-neutral-300 rounded-lg shadow-sm focus:ring-2 focus:ring-brand-400 focus:border-brand-500 transition-all duration-200 hover:border-neutral-400">
                        </div>
                    </div>
                </section>
                <div class="pt-6 border-t border-brand-100 flex justify-center">
                    <button type="submit" id="submit-btn"
                        class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-semibold rounded-xl text-text-light bg-gradient-to-r from-brand-500 via-brand-600 to-brand-500 hover:from-brand-600 hover:via-brand-700 hover:to-brand-600 focus:outline-none focus:ring-4 focus:ring-brand-300 transition-all duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                        <i data-lucide="zap" class="w-5 h-5 mr-2"></i>
                        Create InstructoHub LMS
                    </button>
                </div>
            </form>
        </div>
    </main>
    <script>
        const steps = [{
                icon: "zap",
                text: "Getting your information processed",
                delay: 0
            },
            {
                icon: "server",
                text: "Our servers talking to each other to start the process",
                delay: 12.5
            },
            {
                icon: "database",
                text: "Your dedicated database is getting ready, we understand, privacy is important",
                delay: 25
            },
            {
                icon: "shield",
                text: "Creating secure environment and configuring user permissions",
                delay: 37.5
            },
            {
                icon: "school",
                text: "Installing essential plugins and learning tools for your LMS",
                delay: 50
            },
            {
                icon: "globe",
                text: "Setting up your domain, for your better identity",
                delay: 62.5
            },
            {
                icon: "check-circle",
                text: "Setting up SSL because security matters the most",
                delay: 75
            },
            {
                icon: "check-circle",
                text: "This is the last step, hold your breath we are just getting it ready...",
                delay: 87.5
            },
        ];
        let progress = 0;
        let currentStep = 0;
        let progressInterval;
        let subdomainCheckTimeout;

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                menuIcon.classList.add('hidden');
                closeIcon.classList.remove('hidden');
            } else {
                mobileMenu.classList.add('hidden');
                menuIcon.classList.remove('hidden');
                closeIcon.classList.add('hidden');
            }
        }

        function smoothScroll(e, href) {
            e.preventDefault();
            if (href.includes("/")) {
                window.location.href = href;
                return;
            }
            const element = document.querySelector(href);
            if (element) {
                const headerOffset = 100;
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }

        function openModal() {
            document.getElementById('video-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('video-modal').classList.add('hidden');
        }

        function showStatus(type, message) {
            const statusDiv = document.getElementById('status-message');
            const statusIcon = document.getElementById('status-icon');
            const statusText = document.getElementById('status-text');
            statusDiv.className = `p-4 mb-6 rounded-xl flex items-start shadow-lg border-l-4 animate-fadeIn ${
                type === 'success' 
                    ? 'bg-gradient-to-r from-success/10 to-success/5 text-success-dark border-success'
                    : 'bg-gradient-to-r from-danger/10 to-danger/5 text-danger-dark border-danger'
            }`;
            statusIcon.className = `flex items-center justify-center w-6 h-6 rounded-full ${
                type === 'success' ? 'bg-success' : 'bg-danger'
            }`;
            statusIcon.innerHTML = type === 'success' ?
                '<i data-lucide="check-circle" class="w-4 h-4 text-white"></i>' :
                '<i data-lucide="alert-triangle" class="w-4 h-4 text-white"></i>';
            statusText.textContent = message;
            statusDiv.classList.remove('hidden');
            lucide.createIcons();
        }

        function hideStatus() {
            document.getElementById('status-message').classList.add('hidden');
        }
        async function checkSubdomainAvailability() {
            const subdomain = document.getElementById('subdomain').value.trim();
            const statusElement = document.getElementById('subdomain-status');
            if (!subdomain) {
                statusElement.innerHTML = '';
                return;
            }
            statusElement.innerHTML = '<span class="text-yellow-600">Checkingâ€¦</span>';
            try {
                const response = await fetch(
                    `https://admin.mdl.instructohub.com/local/multitenant/tenant_find_api.php?name=${encodeURIComponent(subdomain)}`, {
                        method: "GET",
                        mode: "cors"
                    }
                );
                const result = await response.json();
                if (!result) {
                    statusElement.innerHTML = '<span class="text-danger">That subdomain is already taken.</span>';
                } else {
                    statusElement.innerHTML = '<span class="text-success">Good news! It\'s available.</span>';
                }
            } catch (error) {
                console.error("Error checking tenant:", error);
                statusElement.innerHTML =
                    '<span class="text-warning">Couldn\'t verify availability. Try again.</span>';
            }
        }

        function startCreationLoader() {
            document.getElementById('creation-loader').classList.remove('hidden');
            progress = 0;
            currentStep = 0;
            const totalDuration = 70000;
            progressInterval = setInterval(() => {
                progress = Math.min(progress + 100 / (totalDuration / 100), 99);
                updateProgress();
            }, 100);
            steps.forEach((step, index) => {
                setTimeout(() => {
                    currentStep = index;
                    updateStep(step);
                }, (step.delay / 100) * totalDuration);
            });
        }

        function updateProgress() {
            const progressBar = document.getElementById('progress-bar');
            const progressFill = document.getElementById('progress-fill');
            const progressPercent = document.getElementById('progress-percent');
            const timeRemaining = document.getElementById('time-remaining');
            progressBar.style.width = `${progress}%`;
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}% Complete`;
            timeRemaining.textContent = `~${Math.max(0, Math.round((100 - progress) * 0.7))}s remaining`;
        }

        function updateStep(step) {
            const stepIcon = document.getElementById('step-icon');
            const stepMessage = document.getElementById('step-message');
            const stepIndicators = document.getElementById('step-indicators');
            stepIcon.innerHTML = `<i data-lucide="${step.icon}" class="w-4 h-4 text-white"></i>`;
            stepMessage.textContent = step.text;
            const indicators = stepIndicators.children;
            for (let i = 0; i < indicators.length; i++) {
                if (i <= currentStep) {
                    indicators[i].className =
                        'h-1 rounded-full bg-gradient-to-r from-brand-500 to-brand-600 transition-all duration-500';
                } else {
                    indicators[i].className = 'h-1 rounded-full bg-neutral-200';
                }
            }
            lucide.createIcons();
        }

        function stopCreationLoader() {
            if (progressInterval) {
                clearInterval(progressInterval);
            }
            document.getElementById('creation-loader').classList.add('hidden');
        }
        async function handleSubmit(event) {
            event.preventDefault();
            const formData = new FormData();
            const form = event.target;
            formData.append('subdomain', form.subdomain.value);
            formData.append('institution_name', form.institution_name.value);
            formData.append('admin_email', form.admin_email.value);
            formData.append('admin_user', form.admin_user.value);
            formData.append('admin_password', form.admin_password.value);
            const submitBtn = document.getElementById('submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = `
                <div class="animate-spin -ml-1 mr-3 h-5 w-5 border-2 border-text-light border-t-transparent rounded-full"></div>
                Creating Your LMS...
            `;
            startCreationLoader();
            try {
                const response = await fetch(
                    "https://admin.mdl.instructohub.com/local/multitenant/process_tenant.php", {
                        method: "POST",
                        body: formData,
                        mode: "cors"
                    }
                );
                if (response.ok) {
                    showStatus('success',
                        `ðŸŽ‰ Success! Your InstructoHub LMS "${form.institution_name.value}" is now live at ${form.subdomain.value}.instructohub.com`
                    );
                    setTimeout(() => {
                        window.location.href = `https://${form.subdomain.value}.instructohub.com`;
                    }, 2000);
                } else {
                    showStatus('error',
                        'Creation failed. Please verify your configuration and try again. If the issue persists, contact support.'
                    );
                }
            } catch (error) {
                console.error("Error creating tenant:", error);
                showStatus('error', 'Network error occurred. Please check your connection and try again.');
            } finally {
                stopCreationLoader();
                submitBtn.disabled = false;
                submitBtn.innerHTML = `
                    <i data-lucide="zap" class="w-5 h-5 mr-2"></i>
                    Create InstructoHub LMS
                `;
                lucide.createIcons();
            }
        }

        function handleInputChange(event) {
            const {
                id,
                value
            } = event.target;
            hideStatus();
            if (id === 'subdomain') {
                document.getElementById('subdomain-status').innerHTML = '';
                if (subdomainCheckTimeout) {
                    clearTimeout(subdomainCheckTimeout);
                }
                if (value.trim()) {
                    subdomainCheckTimeout = setTimeout(checkSubdomainAvailability, 500);
                }
            }
        }
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            const navBar = document.getElementById('nav-bar');
            if (window.scrollY > 10) {
                header.classList.add('shadow-md');
                navBar.classList.add('border-gray-200');
                navBar.classList.remove('border-transparent');
            } else {
                header.classList.remove('shadow-md');
                navBar.classList.remove('border-gray-200');
                navBar.classList.add('border-transparent');
            }
        });
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('lms-form');
            form.addEventListener('submit', handleSubmit);
            const inputs = form.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('input', handleInputChange);
                input.addEventListener('keyup', handleInputChange);
            });
            lucide.createIcons();
        });
    </script>
</body>

</html>